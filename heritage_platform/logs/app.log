2025-03-29 19:51:45,078 [ERROR] [security_config:17] - Redis初始化失败，将使用内存存储作为后备: Working outside of application context.

This typically means that you attempted to use functionality that needed
the current application. To solve this, set up an application context
with app.app_context(). See the documentation for more information.
2025-03-29 19:53:11,325 [ERROR] [security_config:17] - Redis初始化失败，将使用内存存储作为后备: Working outside of application context.

This typically means that you attempted to use functionality that needed
the current application. To solve this, set up an application context
with app.app_context(). See the documentation for more information.
2025-03-29 19:53:12,783 [ERROR] [security_config:17] - Redis初始化失败，将使用内存存储作为后备: Working outside of application context.

This typically means that you attempted to use functionality that needed
the current application. To solve this, set up an application context
with app.app_context(). See the documentation for more information.
2025-03-29 20:12:47,187 [INFO] [heritage:51] - Found contents for heritage 5: 1 articles, 0 videos, 0 images, 0 rich texts
2025-03-29 20:14:05,969 [INFO] [heritage:51] - Found contents for heritage 5: 1 articles, 0 videos, 0 images, 0 rich texts
2025-03-29 20:16:14,094 [INFO] [heritage:51] - Found contents for heritage 5: 1 articles, 0 videos, 0 images, 0 rich texts
2025-03-29 20:17:48,873 [INFO] [heritage:51] - Found contents for heritage 5: 1 articles, 0 videos, 0 images, 0 rich texts
2025-03-29 20:18:17,240 [INFO] [heritage:51] - Found contents for heritage 5: 1 articles, 0 videos, 0 images, 0 rich texts
2025-03-29 20:26:58,278 [INFO] [heritage:51] - Found contents for heritage 5: 1 articles, 0 videos, 0 images, 0 rich texts
2025-03-29 20:28:59,033 [INFO] [heritage:51] - Found contents for heritage 5: 1 articles, 0 videos, 0 images, 0 rich texts
2025-03-29 20:29:34,325 [INFO] [heritage:51] - Found contents for heritage 5: 1 articles, 0 videos, 0 images, 0 rich texts
2025-03-30 02:37:21,274 [INFO] [heritage:51] - Found contents for heritage 5: 1 articles, 0 videos, 0 images, 0 rich texts
2025-03-30 02:41:55,137 [INFO] [file_handlers:193] - 文件已保存: g:\项目赛\heritage_platform\app\static/uploads\images\58b6e70e7eeb42109771ad878c021517_00033-2459595190.png
2025-03-30 02:41:55,138 [INFO] [user:63] - 设置用户头像路径为: /static/uploads/images/58b6e70e7eeb42109771ad878c021517_00033-2459595190.png
2025-03-30 02:42:10,244 [ERROR] [user:71] - 更新个人资料失败: 'str' object has no attribute 'filename'
2025-03-30 02:52:29,695 [ERROR] [user:71] - 更新个人资料失败: 'str' object has no attribute 'filename'
2025-03-30 02:52:32,330 [ERROR] [user:71] - 更新个人资料失败: 'str' object has no attribute 'filename'
2025-03-30 02:54:00,142 [INFO] [content:306] - 内容创建成功：ID=1, 标题=测试
2025-03-30 02:54:18,607 [INFO] [content:326] - 收到封面图片上传请求
2025-03-30 02:54:18,966 [INFO] [file_handlers:193] - 文件已保存: g:\项目赛\heritage_platform\app\static/uploads\images\f7599a81f19a4806ba9a87567a20e229_00109-1200184407.png
2025-03-30 02:54:22,665 [INFO] [content:200] - 处理封面图片上传: 00109-1200184407.png
2025-03-30 02:54:22,988 [INFO] [file_handlers:193] - 文件已保存: g:\项目赛\heritage_platform\app\static/uploads\images\373b72459b5f429db872a8d994923497_00109-1200184407.png
2025-03-30 02:54:22,989 [INFO] [content:203] - 封面图片上传成功，路径: uploads/images/373b72459b5f429db872a8d994923497_00109-1200184407.png
2025-03-30 02:54:22,997 [INFO] [content:235] - 内容更新成功：ID=1, 标题=测试
2025-03-30 03:18:14,125 [INFO] [file_handlers:193] - 文件已保存: g:\项目赛\heritage_platform\app\static/uploads\images\04d5391eb6d14d9dac66c97afc348e45_IMG_20250309_121517.jpg
2025-03-30 03:18:14,148 [INFO] [heritage:51] - Found contents for heritage 3: 0 articles, 0 videos, 0 images, 0 rich texts
2025-03-30 03:19:13,083 [INFO] [content:306] - 内容创建成功：ID=2, 标题=凤山妈祖游报告
2025-03-30 03:19:42,658 [INFO] [content:326] - 收到封面图片上传请求
2025-03-30 03:19:42,789 [INFO] [file_handlers:193] - 文件已保存: g:\项目赛\heritage_platform\app\static/uploads\images\4de5106e15ac435795cecc9848ccc719_IMG_20250309_123405.jpg
2025-03-30 03:19:56,446 [INFO] [content:326] - 收到封面图片上传请求
2025-03-30 03:19:56,571 [INFO] [file_handlers:193] - 文件已保存: g:\项目赛\heritage_platform\app\static/uploads\images\d0eccea3a8c14d5eb36545c75d2fb3ec_IMG_20250309_123405.jpg
2025-03-30 03:20:00,412 [INFO] [content:200] - 处理封面图片上传: IMG_20250309_123405.jpg
2025-03-30 03:20:00,532 [INFO] [file_handlers:193] - 文件已保存: g:\项目赛\heritage_platform\app\static/uploads\images\79abf19bcba240419eb293fb8cf16712_IMG_20250309_123405.jpg
2025-03-30 03:20:00,533 [INFO] [content:203] - 封面图片上传成功，路径: uploads/images/79abf19bcba240419eb293fb8cf16712_IMG_20250309_123405.jpg
2025-03-30 03:20:00,541 [INFO] [content:235] - 内容更新成功：ID=2, 标题=凤山妈祖游报告
2025-03-30 21:58:38,012 [INFO] [content:374] - 收到封面图片上传请求
2025-03-30 21:58:38,549 [INFO] [file_handlers:193] - 文件已保存: G:\项目赛\heritage_platform\app\static/uploads\images\12dd126535cd463b8c95ae3c12cf609d_00020-339795147.png
2025-03-30 21:58:42,084 [INFO] [content:298] - 处理封面图片上传: 00020-339795147.png
2025-03-30 21:58:42,520 [INFO] [file_handlers:193] - 文件已保存: G:\项目赛\heritage_platform\app\static/uploads\images\a6b5de6a65284641bfe1ddd1f6e3e0e2_00020-339795147.png
2025-03-30 21:58:42,521 [INFO] [content:301] - 封面图片上传成功，路径: uploads/images/a6b5de6a65284641bfe1ddd1f6e3e0e2_00020-339795147.png
2025-03-30 21:58:42,547 [WARNING] [content:337] - 未检测到图片上传
2025-03-30 21:58:42,557 [INFO] [content:354] - 内容创建成功：ID=3, 标题=test
2025-03-30 22:06:42,452 [ERROR] [content:264] - 更新内容失败: 'str' object has no attribute 'filename'
2025-03-30 22:06:42,455 [ERROR] [content:265] - Traceback (most recent call last):
  File "G:\项目赛\heritage_platform\app\routes\content.py", line 200, in edit
    current_app.logger.info(f"处理封面图片上传: {form.cover_image.data.filename}")
                                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'filename'

2025-03-30 22:07:11,561 [ERROR] [content:264] - 更新内容失败: 'str' object has no attribute 'filename'
2025-03-30 22:07:11,562 [ERROR] [content:265] - Traceback (most recent call last):
  File "g:\项目赛\heritage_platform\app\routes\content.py", line 200, in edit
    current_app.logger.info(f"处理封面图片上传: {form.cover_image.data.filename}")
                                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'filename'

2025-03-30 22:07:23,652 [ERROR] [content:264] - 更新内容失败: 'str' object has no attribute 'filename'
2025-03-30 22:07:23,653 [ERROR] [content:265] - Traceback (most recent call last):
  File "g:\项目赛\heritage_platform\app\routes\content.py", line 200, in edit
    current_app.logger.info(f"处理封面图片上传: {form.cover_image.data.filename}")
                                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'filename'

2025-03-30 22:07:53,528 [INFO] [content:374] - 收到封面图片上传请求
2025-03-30 22:07:54,014 [INFO] [file_handlers:193] - 文件已保存: g:\项目赛\heritage_platform\app\static/uploads\images\7308a776b6a64d788583924b0801924b_00038-2459595195.png
2025-03-30 22:08:12,449 [INFO] [content:200] - 处理封面图片上传: 00038-2459595195.png
2025-03-30 22:08:12,900 [INFO] [file_handlers:193] - 文件已保存: g:\项目赛\heritage_platform\app\static/uploads\images\a085090a0bae4814a75e57807ba7b1dc_00038-2459595195.png
2025-03-30 22:08:12,902 [INFO] [content:203] - 封面图片上传成功，路径: uploads/images/a085090a0bae4814a75e57807ba7b1dc_00038-2459595195.png
2025-03-30 22:08:12,911 [INFO] [content:257] - 内容更新成功：ID=3, 标题=test
2025-03-30 22:08:22,083 [ERROR] [content:264] - 更新内容失败: 'str' object has no attribute 'filename'
2025-03-30 22:08:22,085 [ERROR] [content:265] - Traceback (most recent call last):
  File "g:\项目赛\heritage_platform\app\routes\content.py", line 200, in edit
    current_app.logger.info(f"处理封面图片上传: {form.cover_image.data.filename}")
                                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'filename'

2025-03-30 22:09:53,804 [WARNING] [content:337] - 未检测到图片上传
2025-03-30 22:09:53,809 [INFO] [content:354] - 内容创建成功：ID=4, 标题=1
2025-03-30 22:25:15,452 [INFO] [content:226] - 处理单个图片上传: 00019-3194159250.png
2025-03-30 22:25:15,876 [INFO] [file_handlers:193] - 文件已保存: g:\项目赛\heritage_platform\app\static/uploads\images\f308b7abc481482b9526e5f7fc77e874_00019-3194159250.png
2025-03-30 22:25:15,877 [INFO] [content:229] - 图片上传成功，路径: uploads/images/f308b7abc481482b9526e5f7fc77e874_00019-3194159250.png
2025-03-30 22:25:15,898 [ERROR] [content:286] - 更新内容失败: (pymysql.err.ProgrammingError) (1146, "Table 'heritage_platform.content_images' doesn't exist")
[SQL: INSERT INTO content_images (content_id, file_path, caption, `order`, created_at) VALUES (%(content_id)s, %(file_path)s, %(caption)s, %(order)s, %(created_at)s)]
[parameters: {'content_id': 4, 'file_path': 'uploads/images/f308b7abc481482b9526e5f7fc77e874_00019-3194159250.png', 'caption': '', 'order': 0, 'created_at': datetime.datetime(2025, 3, 30, 22, 25, 15, 882725)}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-03-30 22:25:15,947 [ERROR] [content:287] - Traceback (most recent call last):
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
  File "G:\项目赛\.conda\Lib\site-packages\pymysql\cursors.py", line 153, in execute
    result = self._query(query)
             ^^^^^^^^^^^^^^^^^^
  File "G:\项目赛\.conda\Lib\site-packages\pymysql\cursors.py", line 322, in _query
    conn.query(q)
  File "G:\项目赛\.conda\Lib\site-packages\pymysql\connections.py", line 563, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "G:\项目赛\.conda\Lib\site-packages\pymysql\connections.py", line 825, in _read_query_result
    result.read()
  File "G:\项目赛\.conda\Lib\site-packages\pymysql\connections.py", line 1199, in read
    first_packet = self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "G:\项目赛\.conda\Lib\site-packages\pymysql\connections.py", line 775, in _read_packet
    packet.raise_for_error()
  File "G:\项目赛\.conda\Lib\site-packages\pymysql\protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "G:\项目赛\.conda\Lib\site-packages\pymysql\err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.ProgrammingError: (1146, "Table 'heritage_platform.content_images' doesn't exist")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "g:\项目赛\heritage_platform\app\routes\content.py", line 278, in edit
    db.session.commit()
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\orm\scoping.py", line 599, in commit
    return self._proxied.commit()
           ^^^^^^^^^^^^^^^^^^^^^^
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\orm\session.py", line 4353, in flush
    self._flush(objects)
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\orm\session.py", line 4488, in _flush
    with util.safe_reraise():
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\orm\session.py", line 4449, in _flush
    flush_context.execute()
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\orm\persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\orm\persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
  File "G:\项目赛\.conda\Lib\site-packages\pymysql\cursors.py", line 153, in execute
    result = self._query(query)
             ^^^^^^^^^^^^^^^^^^
  File "G:\项目赛\.conda\Lib\site-packages\pymysql\cursors.py", line 322, in _query
    conn.query(q)
  File "G:\项目赛\.conda\Lib\site-packages\pymysql\connections.py", line 563, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "G:\项目赛\.conda\Lib\site-packages\pymysql\connections.py", line 825, in _read_query_result
    result.read()
  File "G:\项目赛\.conda\Lib\site-packages\pymysql\connections.py", line 1199, in read
    first_packet = self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "G:\项目赛\.conda\Lib\site-packages\pymysql\connections.py", line 775, in _read_packet
    packet.raise_for_error()
  File "G:\项目赛\.conda\Lib\site-packages\pymysql\protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "G:\项目赛\.conda\Lib\site-packages\pymysql\err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
sqlalchemy.exc.ProgrammingError: (pymysql.err.ProgrammingError) (1146, "Table 'heritage_platform.content_images' doesn't exist")
[SQL: INSERT INTO content_images (content_id, file_path, caption, `order`, created_at) VALUES (%(content_id)s, %(file_path)s, %(caption)s, %(order)s, %(created_at)s)]
[parameters: {'content_id': 4, 'file_path': 'uploads/images/f308b7abc481482b9526e5f7fc77e874_00019-3194159250.png', 'caption': '', 'order': 0, 'created_at': datetime.datetime(2025, 3, 30, 22, 25, 15, 882725)}]
(Background on this error at: https://sqlalche.me/e/20/f405)

2025-03-30 22:25:27,837 [INFO] [content:417] - 收到封面图片上传请求
2025-03-30 22:25:28,318 [INFO] [file_handlers:193] - 文件已保存: g:\项目赛\heritage_platform\app\static/uploads\images\e550e655363340808cefc3bdce57329e_00020-339795147.png
2025-03-30 22:25:35,552 [INFO] [content:200] - 处理封面图片上传: 00020-339795147.png
2025-03-30 22:25:35,998 [INFO] [file_handlers:193] - 文件已保存: g:\项目赛\heritage_platform\app\static/uploads\images\fbbb49da936147be8119b5668f174eb4_00020-339795147.png
2025-03-30 22:25:35,999 [INFO] [content:203] - 封面图片上传成功，路径: uploads/images/fbbb49da936147be8119b5668f174eb4_00020-339795147.png
2025-03-30 22:25:35,999 [INFO] [content:226] - 处理单个图片上传: 00021-1936736670.png
2025-03-30 22:25:36,325 [INFO] [file_handlers:193] - 文件已保存: g:\项目赛\heritage_platform\app\static/uploads\images\a7f066da905b454d869854b5f357f7c9_00021-1936736670.png
2025-03-30 22:25:36,326 [INFO] [content:229] - 图片上传成功，路径: uploads/images/a7f066da905b454d869854b5f357f7c9_00021-1936736670.png
2025-03-30 22:25:36,332 [ERROR] [content:286] - 更新内容失败: (pymysql.err.ProgrammingError) (1146, "Table 'heritage_platform.content_images' doesn't exist")
[SQL: INSERT INTO content_images (content_id, file_path, caption, `order`, created_at) VALUES (%(content_id)s, %(file_path)s, %(caption)s, %(order)s, %(created_at)s)]
[parameters: {'content_id': 4, 'file_path': 'uploads/images/a7f066da905b454d869854b5f357f7c9_00021-1936736670.png', 'caption': '', 'order': 0, 'created_at': datetime.datetime(2025, 3, 30, 22, 25, 36, 329208)}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-03-30 22:25:36,335 [ERROR] [content:287] - Traceback (most recent call last):
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
  File "G:\项目赛\.conda\Lib\site-packages\pymysql\cursors.py", line 153, in execute
    result = self._query(query)
             ^^^^^^^^^^^^^^^^^^
  File "G:\项目赛\.conda\Lib\site-packages\pymysql\cursors.py", line 322, in _query
    conn.query(q)
  File "G:\项目赛\.conda\Lib\site-packages\pymysql\connections.py", line 563, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "G:\项目赛\.conda\Lib\site-packages\pymysql\connections.py", line 825, in _read_query_result
    result.read()
  File "G:\项目赛\.conda\Lib\site-packages\pymysql\connections.py", line 1199, in read
    first_packet = self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "G:\项目赛\.conda\Lib\site-packages\pymysql\connections.py", line 775, in _read_packet
    packet.raise_for_error()
  File "G:\项目赛\.conda\Lib\site-packages\pymysql\protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "G:\项目赛\.conda\Lib\site-packages\pymysql\err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.ProgrammingError: (1146, "Table 'heritage_platform.content_images' doesn't exist")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "g:\项目赛\heritage_platform\app\routes\content.py", line 278, in edit
    db.session.commit()
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\orm\scoping.py", line 599, in commit
    return self._proxied.commit()
           ^^^^^^^^^^^^^^^^^^^^^^
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\orm\session.py", line 4353, in flush
    self._flush(objects)
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\orm\session.py", line 4488, in _flush
    with util.safe_reraise():
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\orm\session.py", line 4449, in _flush
    flush_context.execute()
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\orm\persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\orm\persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
  File "G:\项目赛\.conda\Lib\site-packages\pymysql\cursors.py", line 153, in execute
    result = self._query(query)
             ^^^^^^^^^^^^^^^^^^
  File "G:\项目赛\.conda\Lib\site-packages\pymysql\cursors.py", line 322, in _query
    conn.query(q)
  File "G:\项目赛\.conda\Lib\site-packages\pymysql\connections.py", line 563, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "G:\项目赛\.conda\Lib\site-packages\pymysql\connections.py", line 825, in _read_query_result
    result.read()
  File "G:\项目赛\.conda\Lib\site-packages\pymysql\connections.py", line 1199, in read
    first_packet = self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "G:\项目赛\.conda\Lib\site-packages\pymysql\connections.py", line 775, in _read_packet
    packet.raise_for_error()
  File "G:\项目赛\.conda\Lib\site-packages\pymysql\protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "G:\项目赛\.conda\Lib\site-packages\pymysql\err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
sqlalchemy.exc.ProgrammingError: (pymysql.err.ProgrammingError) (1146, "Table 'heritage_platform.content_images' doesn't exist")
[SQL: INSERT INTO content_images (content_id, file_path, caption, `order`, created_at) VALUES (%(content_id)s, %(file_path)s, %(caption)s, %(order)s, %(created_at)s)]
[parameters: {'content_id': 4, 'file_path': 'uploads/images/a7f066da905b454d869854b5f357f7c9_00021-1936736670.png', 'caption': '', 'order': 0, 'created_at': datetime.datetime(2025, 3, 30, 22, 25, 36, 329208)}]
(Background on this error at: https://sqlalche.me/e/20/f405)

2025-03-30 22:29:13,153 [INFO] [content:200] - 处理封面图片上传: 00020-339795147.png
2025-03-30 22:29:13,684 [INFO] [file_handlers:193] - 文件已保存: g:\项目赛\heritage_platform\app\static/uploads\images\f9dcf0556b5c435bac4fd6ce851e681d_00020-339795147.png
2025-03-30 22:29:13,685 [INFO] [content:203] - 封面图片上传成功，路径: uploads/images/f9dcf0556b5c435bac4fd6ce851e681d_00020-339795147.png
2025-03-30 22:29:13,685 [INFO] [content:226] - 处理单个图片上传: 00021-1936736670.png
2025-03-30 22:29:13,985 [INFO] [file_handlers:193] - 文件已保存: g:\项目赛\heritage_platform\app\static/uploads\images\e2e78cdd3941431cb1e14745665ea1b4_00021-1936736670.png
2025-03-30 22:29:13,987 [INFO] [content:229] - 图片上传成功，路径: uploads/images/e2e78cdd3941431cb1e14745665ea1b4_00021-1936736670.png
2025-03-30 22:29:13,998 [ERROR] [content:289] - 更新内容失败: (pymysql.err.ProgrammingError) (1146, "Table 'heritage_platform.content_images' doesn't exist")
[SQL: INSERT INTO content_images (content_id, file_path, caption, `order`, created_at) VALUES (%(content_id)s, %(file_path)s, %(caption)s, %(order)s, %(created_at)s)]
[parameters: {'content_id': 4, 'file_path': 'uploads/images/e2e78cdd3941431cb1e14745665ea1b4_00021-1936736670.png', 'caption': '', 'order': 0, 'created_at': datetime.datetime(2025, 3, 30, 22, 29, 13, 992354)}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-03-30 22:29:14,007 [ERROR] [content:290] - Traceback (most recent call last):
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
  File "G:\项目赛\.conda\Lib\site-packages\pymysql\cursors.py", line 153, in execute
    result = self._query(query)
             ^^^^^^^^^^^^^^^^^^
  File "G:\项目赛\.conda\Lib\site-packages\pymysql\cursors.py", line 322, in _query
    conn.query(q)
  File "G:\项目赛\.conda\Lib\site-packages\pymysql\connections.py", line 563, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "G:\项目赛\.conda\Lib\site-packages\pymysql\connections.py", line 825, in _read_query_result
    result.read()
  File "G:\项目赛\.conda\Lib\site-packages\pymysql\connections.py", line 1199, in read
    first_packet = self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "G:\项目赛\.conda\Lib\site-packages\pymysql\connections.py", line 775, in _read_packet
    packet.raise_for_error()
  File "G:\项目赛\.conda\Lib\site-packages\pymysql\protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "G:\项目赛\.conda\Lib\site-packages\pymysql\err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.ProgrammingError: (1146, "Table 'heritage_platform.content_images' doesn't exist")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "g:\项目赛\heritage_platform\app\routes\content.py", line 281, in edit
    db.session.commit()
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\orm\scoping.py", line 599, in commit
    return self._proxied.commit()
           ^^^^^^^^^^^^^^^^^^^^^^
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\orm\session.py", line 4353, in flush
    self._flush(objects)
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\orm\session.py", line 4488, in _flush
    with util.safe_reraise():
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\orm\session.py", line 4449, in _flush
    flush_context.execute()
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\orm\persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\orm\persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
  File "G:\项目赛\.conda\Lib\site-packages\pymysql\cursors.py", line 153, in execute
    result = self._query(query)
             ^^^^^^^^^^^^^^^^^^
  File "G:\项目赛\.conda\Lib\site-packages\pymysql\cursors.py", line 322, in _query
    conn.query(q)
  File "G:\项目赛\.conda\Lib\site-packages\pymysql\connections.py", line 563, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "G:\项目赛\.conda\Lib\site-packages\pymysql\connections.py", line 825, in _read_query_result
    result.read()
  File "G:\项目赛\.conda\Lib\site-packages\pymysql\connections.py", line 1199, in read
    first_packet = self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "G:\项目赛\.conda\Lib\site-packages\pymysql\connections.py", line 775, in _read_packet
    packet.raise_for_error()
  File "G:\项目赛\.conda\Lib\site-packages\pymysql\protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "G:\项目赛\.conda\Lib\site-packages\pymysql\err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
sqlalchemy.exc.ProgrammingError: (pymysql.err.ProgrammingError) (1146, "Table 'heritage_platform.content_images' doesn't exist")
[SQL: INSERT INTO content_images (content_id, file_path, caption, `order`, created_at) VALUES (%(content_id)s, %(file_path)s, %(caption)s, %(order)s, %(created_at)s)]
[parameters: {'content_id': 4, 'file_path': 'uploads/images/e2e78cdd3941431cb1e14745665ea1b4_00021-1936736670.png', 'caption': '', 'order': 0, 'created_at': datetime.datetime(2025, 3, 30, 22, 29, 13, 992354)}]
(Background on this error at: https://sqlalche.me/e/20/f405)

2025-03-30 22:29:22,387 [INFO] [content:226] - 处理单个图片上传: 00028-2499689602.png
2025-03-30 22:29:22,763 [INFO] [file_handlers:193] - 文件已保存: g:\项目赛\heritage_platform\app\static/uploads\images\c887e5bafde344f4b11d1a680f81c296_00028-2499689602.png
2025-03-30 22:29:22,764 [INFO] [content:229] - 图片上传成功，路径: uploads/images/c887e5bafde344f4b11d1a680f81c296_00028-2499689602.png
2025-03-30 22:29:22,772 [ERROR] [content:289] - 更新内容失败: (pymysql.err.ProgrammingError) (1146, "Table 'heritage_platform.content_images' doesn't exist")
[SQL: INSERT INTO content_images (content_id, file_path, caption, `order`, created_at) VALUES (%(content_id)s, %(file_path)s, %(caption)s, %(order)s, %(created_at)s)]
[parameters: {'content_id': 4, 'file_path': 'uploads/images/c887e5bafde344f4b11d1a680f81c296_00028-2499689602.png', 'caption': '', 'order': 0, 'created_at': datetime.datetime(2025, 3, 30, 22, 29, 22, 768878)}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-03-30 22:29:22,775 [ERROR] [content:290] - Traceback (most recent call last):
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
  File "G:\项目赛\.conda\Lib\site-packages\pymysql\cursors.py", line 153, in execute
    result = self._query(query)
             ^^^^^^^^^^^^^^^^^^
  File "G:\项目赛\.conda\Lib\site-packages\pymysql\cursors.py", line 322, in _query
    conn.query(q)
  File "G:\项目赛\.conda\Lib\site-packages\pymysql\connections.py", line 563, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "G:\项目赛\.conda\Lib\site-packages\pymysql\connections.py", line 825, in _read_query_result
    result.read()
  File "G:\项目赛\.conda\Lib\site-packages\pymysql\connections.py", line 1199, in read
    first_packet = self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "G:\项目赛\.conda\Lib\site-packages\pymysql\connections.py", line 775, in _read_packet
    packet.raise_for_error()
  File "G:\项目赛\.conda\Lib\site-packages\pymysql\protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "G:\项目赛\.conda\Lib\site-packages\pymysql\err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.ProgrammingError: (1146, "Table 'heritage_platform.content_images' doesn't exist")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "g:\项目赛\heritage_platform\app\routes\content.py", line 281, in edit
    db.session.commit()
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\orm\scoping.py", line 599, in commit
    return self._proxied.commit()
           ^^^^^^^^^^^^^^^^^^^^^^
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\orm\session.py", line 4353, in flush
    self._flush(objects)
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\orm\session.py", line 4488, in _flush
    with util.safe_reraise():
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\orm\session.py", line 4449, in _flush
    flush_context.execute()
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\orm\persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\orm\persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
  File "G:\项目赛\.conda\Lib\site-packages\pymysql\cursors.py", line 153, in execute
    result = self._query(query)
             ^^^^^^^^^^^^^^^^^^
  File "G:\项目赛\.conda\Lib\site-packages\pymysql\cursors.py", line 322, in _query
    conn.query(q)
  File "G:\项目赛\.conda\Lib\site-packages\pymysql\connections.py", line 563, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "G:\项目赛\.conda\Lib\site-packages\pymysql\connections.py", line 825, in _read_query_result
    result.read()
  File "G:\项目赛\.conda\Lib\site-packages\pymysql\connections.py", line 1199, in read
    first_packet = self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "G:\项目赛\.conda\Lib\site-packages\pymysql\connections.py", line 775, in _read_packet
    packet.raise_for_error()
  File "G:\项目赛\.conda\Lib\site-packages\pymysql\protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "G:\项目赛\.conda\Lib\site-packages\pymysql\err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
sqlalchemy.exc.ProgrammingError: (pymysql.err.ProgrammingError) (1146, "Table 'heritage_platform.content_images' doesn't exist")
[SQL: INSERT INTO content_images (content_id, file_path, caption, `order`, created_at) VALUES (%(content_id)s, %(file_path)s, %(caption)s, %(order)s, %(created_at)s)]
[parameters: {'content_id': 4, 'file_path': 'uploads/images/c887e5bafde344f4b11d1a680f81c296_00028-2499689602.png', 'caption': '', 'order': 0, 'created_at': datetime.datetime(2025, 3, 30, 22, 29, 22, 768878)}]
(Background on this error at: https://sqlalche.me/e/20/f405)

2025-03-30 22:31:58,144 [INFO] [content:346] - 处理单个图片上传: 00020-339795147.png
2025-03-30 22:31:58,593 [INFO] [file_handlers:193] - 文件已保存: g:\项目赛\heritage_platform\app\static/uploads\images\1d548b32948641d3b76264c51ee340cb_00020-339795147.png
2025-03-30 22:31:58,594 [INFO] [content:349] - 图片上传成功，路径: uploads/images/1d548b32948641d3b76264c51ee340cb_00020-339795147.png
2025-03-30 22:31:58,599 [ERROR] [content:407] - 创建内容失败: (pymysql.err.ProgrammingError) (1146, "Table 'heritage_platform.content_images' doesn't exist")
[SQL: INSERT INTO content_images (content_id, file_path, caption, `order`, created_at) VALUES (%(content_id)s, %(file_path)s, %(caption)s, %(order)s, %(created_at)s)]
[parameters: {'content_id': 5, 'file_path': 'uploads/images/1d548b32948641d3b76264c51ee340cb_00020-339795147.png', 'caption': '', 'order': 0, 'created_at': datetime.datetime(2025, 3, 30, 22, 31, 58, 596097)}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-03-30 22:31:58,604 [ERROR] [content:408] - Traceback (most recent call last):
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
  File "G:\项目赛\.conda\Lib\site-packages\pymysql\cursors.py", line 153, in execute
    result = self._query(query)
             ^^^^^^^^^^^^^^^^^^
  File "G:\项目赛\.conda\Lib\site-packages\pymysql\cursors.py", line 322, in _query
    conn.query(q)
  File "G:\项目赛\.conda\Lib\site-packages\pymysql\connections.py", line 563, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "G:\项目赛\.conda\Lib\site-packages\pymysql\connections.py", line 825, in _read_query_result
    result.read()
  File "G:\项目赛\.conda\Lib\site-packages\pymysql\connections.py", line 1199, in read
    first_packet = self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "G:\项目赛\.conda\Lib\site-packages\pymysql\connections.py", line 775, in _read_packet
    packet.raise_for_error()
  File "G:\项目赛\.conda\Lib\site-packages\pymysql\protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "G:\项目赛\.conda\Lib\site-packages\pymysql\err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.ProgrammingError: (1146, "Table 'heritage_platform.content_images' doesn't exist")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "g:\项目赛\heritage_platform\app\routes\content.py", line 399, in create
    db.session.commit()
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\orm\scoping.py", line 599, in commit
    return self._proxied.commit()
           ^^^^^^^^^^^^^^^^^^^^^^
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\orm\session.py", line 4353, in flush
    self._flush(objects)
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\orm\session.py", line 4488, in _flush
    with util.safe_reraise():
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\orm\session.py", line 4449, in _flush
    flush_context.execute()
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\orm\persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\orm\persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
  File "G:\项目赛\.conda\Lib\site-packages\pymysql\cursors.py", line 153, in execute
    result = self._query(query)
             ^^^^^^^^^^^^^^^^^^
  File "G:\项目赛\.conda\Lib\site-packages\pymysql\cursors.py", line 322, in _query
    conn.query(q)
  File "G:\项目赛\.conda\Lib\site-packages\pymysql\connections.py", line 563, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "G:\项目赛\.conda\Lib\site-packages\pymysql\connections.py", line 825, in _read_query_result
    result.read()
  File "G:\项目赛\.conda\Lib\site-packages\pymysql\connections.py", line 1199, in read
    first_packet = self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "G:\项目赛\.conda\Lib\site-packages\pymysql\connections.py", line 775, in _read_packet
    packet.raise_for_error()
  File "G:\项目赛\.conda\Lib\site-packages\pymysql\protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "G:\项目赛\.conda\Lib\site-packages\pymysql\err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
sqlalchemy.exc.ProgrammingError: (pymysql.err.ProgrammingError) (1146, "Table 'heritage_platform.content_images' doesn't exist")
[SQL: INSERT INTO content_images (content_id, file_path, caption, `order`, created_at) VALUES (%(content_id)s, %(file_path)s, %(caption)s, %(order)s, %(created_at)s)]
[parameters: {'content_id': 5, 'file_path': 'uploads/images/1d548b32948641d3b76264c51ee340cb_00020-339795147.png', 'caption': '', 'order': 0, 'created_at': datetime.datetime(2025, 3, 30, 22, 31, 58, 596097)}]
(Background on this error at: https://sqlalche.me/e/20/f405)

2025-03-30 22:36:50,323 [INFO] [content:346] - 处理单个图片上传: 00031-2459595188.png
2025-03-30 22:36:50,794 [INFO] [file_handlers:193] - 文件已保存: g:\项目赛\heritage_platform\app\static/uploads\images\2cc8c4bddede4c8ca9fcc584955ba2bd_00031-2459595188.png
2025-03-30 22:36:50,795 [INFO] [content:349] - 图片上传成功，路径: uploads/images/2cc8c4bddede4c8ca9fcc584955ba2bd_00031-2459595188.png
2025-03-30 22:36:50,803 [ERROR] [content:407] - 创建内容失败: (pymysql.err.ProgrammingError) (1146, "Table 'heritage_platform.content_images' doesn't exist")
[SQL: INSERT INTO content_images (content_id, file_path, caption, `order`, created_at) VALUES (%(content_id)s, %(file_path)s, %(caption)s, %(order)s, %(created_at)s)]
[parameters: {'content_id': 6, 'file_path': 'uploads/images/2cc8c4bddede4c8ca9fcc584955ba2bd_00031-2459595188.png', 'caption': '', 'order': 0, 'created_at': datetime.datetime(2025, 3, 30, 22, 36, 50, 797894)}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-03-30 22:36:50,820 [ERROR] [content:408] - Traceback (most recent call last):
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
  File "G:\项目赛\.conda\Lib\site-packages\pymysql\cursors.py", line 153, in execute
    result = self._query(query)
             ^^^^^^^^^^^^^^^^^^
  File "G:\项目赛\.conda\Lib\site-packages\pymysql\cursors.py", line 322, in _query
    conn.query(q)
  File "G:\项目赛\.conda\Lib\site-packages\pymysql\connections.py", line 563, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "G:\项目赛\.conda\Lib\site-packages\pymysql\connections.py", line 825, in _read_query_result
    result.read()
  File "G:\项目赛\.conda\Lib\site-packages\pymysql\connections.py", line 1199, in read
    first_packet = self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "G:\项目赛\.conda\Lib\site-packages\pymysql\connections.py", line 775, in _read_packet
    packet.raise_for_error()
  File "G:\项目赛\.conda\Lib\site-packages\pymysql\protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "G:\项目赛\.conda\Lib\site-packages\pymysql\err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.ProgrammingError: (1146, "Table 'heritage_platform.content_images' doesn't exist")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "g:\项目赛\heritage_platform\app\routes\content.py", line 399, in create
    db.session.commit()
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\orm\scoping.py", line 599, in commit
    return self._proxied.commit()
           ^^^^^^^^^^^^^^^^^^^^^^
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\orm\session.py", line 4353, in flush
    self._flush(objects)
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\orm\session.py", line 4488, in _flush
    with util.safe_reraise():
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\orm\session.py", line 4449, in _flush
    flush_context.execute()
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\orm\persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\orm\persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "G:\项目赛\.conda\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
  File "G:\项目赛\.conda\Lib\site-packages\pymysql\cursors.py", line 153, in execute
    result = self._query(query)
             ^^^^^^^^^^^^^^^^^^
  File "G:\项目赛\.conda\Lib\site-packages\pymysql\cursors.py", line 322, in _query
    conn.query(q)
  File "G:\项目赛\.conda\Lib\site-packages\pymysql\connections.py", line 563, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "G:\项目赛\.conda\Lib\site-packages\pymysql\connections.py", line 825, in _read_query_result
    result.read()
  File "G:\项目赛\.conda\Lib\site-packages\pymysql\connections.py", line 1199, in read
    first_packet = self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "G:\项目赛\.conda\Lib\site-packages\pymysql\connections.py", line 775, in _read_packet
    packet.raise_for_error()
  File "G:\项目赛\.conda\Lib\site-packages\pymysql\protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
  File "G:\项目赛\.conda\Lib\site-packages\pymysql\err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
sqlalchemy.exc.ProgrammingError: (pymysql.err.ProgrammingError) (1146, "Table 'heritage_platform.content_images' doesn't exist")
[SQL: INSERT INTO content_images (content_id, file_path, caption, `order`, created_at) VALUES (%(content_id)s, %(file_path)s, %(caption)s, %(order)s, %(created_at)s)]
[parameters: {'content_id': 6, 'file_path': 'uploads/images/2cc8c4bddede4c8ca9fcc584955ba2bd_00031-2459595188.png', 'caption': '', 'order': 0, 'created_at': datetime.datetime(2025, 3, 30, 22, 36, 50, 797894)}]
(Background on this error at: https://sqlalche.me/e/20/f405)

2025-03-30 22:42:31,080 [INFO] [content:346] - 处理单个图片上传: 00031-2459595188.png
2025-03-30 22:42:31,507 [INFO] [file_handlers:193] - 文件已保存: g:\项目赛\heritage_platform\app\static/uploads\images\722c4cf38fd64a1cbc41aff37a496a41_00031-2459595188.png
2025-03-30 22:42:31,507 [INFO] [content:349] - 图片上传成功，路径: uploads/images/722c4cf38fd64a1cbc41aff37a496a41_00031-2459595188.png
2025-03-30 22:42:31,516 [INFO] [content:400] - 内容创建成功：ID=7, 标题=1
2025-03-30 22:42:40,776 [INFO] [content:226] - 处理单个图片上传: 00021-1936736670.png
2025-03-30 22:42:41,094 [INFO] [file_handlers:193] - 文件已保存: g:\项目赛\heritage_platform\app\static/uploads\images\de637544468642da990a633a2a189334_00021-1936736670.png
2025-03-30 22:42:41,095 [INFO] [content:229] - 图片上传成功，路径: uploads/images/de637544468642da990a633a2a189334_00021-1936736670.png
2025-03-30 22:42:41,103 [INFO] [content:282] - 内容更新成功：ID=7, 标题=1
2025-03-30 22:47:01,197 [INFO] [content:226] - 处理单个图片上传: 00027-3240313296.png
2025-03-30 22:47:01,584 [INFO] [file_handlers:193] - 文件已保存: g:\项目赛\heritage_platform\app\static/uploads\images\6446646a9fdd41cda69d8b9b4ba4137d_00027-3240313296.png
2025-03-30 22:47:01,585 [INFO] [content:229] - 图片上传成功，路径: uploads/images/6446646a9fdd41cda69d8b9b4ba4137d_00027-3240313296.png
2025-03-30 22:47:01,596 [INFO] [content:282] - 内容更新成功：ID=7, 标题=1
2025-03-30 22:55:29,223 [INFO] [content:226] - 处理单个图片上传: 00020-339795147.png
2025-03-30 22:55:29,683 [INFO] [file_handlers:193] - 文件已保存: g:\项目赛\heritage_platform\app\static/uploads\images\516304b9c0804d0b81d37d89130feca6_00020-339795147.png
2025-03-30 22:55:29,683 [INFO] [content:229] - 图片上传成功，路径: uploads/images/516304b9c0804d0b81d37d89130feca6_00020-339795147.png
2025-03-30 22:55:29,691 [INFO] [content:282] - 内容更新成功：ID=7, 标题=1
2025-03-30 22:55:44,433 [INFO] [content:226] - 处理单个图片上传: 00012-138339222.png
2025-03-30 22:55:44,758 [INFO] [file_handlers:193] - 文件已保存: g:\项目赛\heritage_platform\app\static/uploads\images\115503f9f9fc45bda16f625252186163_00012-138339222.png
2025-03-30 22:55:44,760 [INFO] [content:229] - 图片上传成功，路径: uploads/images/115503f9f9fc45bda16f625252186163_00012-138339222.png
2025-03-30 22:55:44,767 [INFO] [content:282] - 内容更新成功：ID=7, 标题=1
2025-03-30 22:56:34,016 [INFO] [content:226] - 处理单个图片上传: 00029-730120803.png
2025-03-30 22:56:34,450 [INFO] [file_handlers:193] - 文件已保存: g:\项目赛\heritage_platform\app\static/uploads\images\a7d839c2ec0946f7b2a926d1d74b0d74_00029-730120803.png
2025-03-30 22:56:34,451 [INFO] [content:229] - 图片上传成功，路径: uploads/images/a7d839c2ec0946f7b2a926d1d74b0d74_00029-730120803.png
2025-03-30 22:56:34,458 [INFO] [content:282] - 内容更新成功：ID=7, 标题=1
2025-03-30 22:58:54,691 [INFO] [content:226] - 处理单个图片上传: 00030-2459595187.png
2025-03-30 22:58:55,139 [INFO] [file_handlers:193] - 文件已保存: g:\项目赛\heritage_platform\app\static/uploads\images\aebc88b161224a73845ef44e2b17f3ba_00030-2459595187.png
2025-03-30 22:58:55,141 [INFO] [content:229] - 图片上传成功，路径: uploads/images/aebc88b161224a73845ef44e2b17f3ba_00030-2459595187.png
2025-03-30 22:58:55,148 [INFO] [content:282] - 内容更新成功：ID=7, 标题=1
2025-03-30 22:59:20,301 [INFO] [content:420] - 收到封面图片上传请求
2025-03-30 22:59:20,721 [INFO] [file_handlers:193] - 文件已保存: g:\项目赛\heritage_platform\app\static/uploads\images\0686e51091224c6397ecf2993696ab82_00030-2459595187.png
2025-03-30 22:59:23,523 [INFO] [content:200] - 处理封面图片上传: 00030-2459595187.png
2025-03-30 22:59:23,928 [INFO] [file_handlers:193] - 文件已保存: g:\项目赛\heritage_platform\app\static/uploads\images\0402809171644d75a816630971ae7d53_00030-2459595187.png
2025-03-30 22:59:23,930 [INFO] [content:203] - 封面图片上传成功，路径: uploads/images/0402809171644d75a816630971ae7d53_00030-2459595187.png
2025-03-30 22:59:23,937 [INFO] [content:282] - 内容更新成功：ID=7, 标题=1
2025-03-30 22:59:28,935 [ERROR] [content:289] - 更新内容失败: 'str' object has no attribute 'filename'
2025-03-30 22:59:28,939 [ERROR] [content:290] - Traceback (most recent call last):
  File "g:\项目赛\heritage_platform\app\routes\content.py", line 199, in edit
    if form.cover_image.data and form.cover_image.data.filename:
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'filename'

2025-03-30 23:00:06,003 [INFO] [content:420] - 收到封面图片上传请求
2025-03-30 23:00:06,448 [INFO] [file_handlers:193] - 文件已保存: g:\项目赛\heritage_platform\app\static/uploads\images\dd8ae44eb15d41e0905c3a8dd9e72e75_00029-730120803.png
2025-03-30 23:00:10,545 [INFO] [content:200] - 处理封面图片上传: 00029-730120803.png
2025-03-30 23:00:10,979 [INFO] [file_handlers:193] - 文件已保存: g:\项目赛\heritage_platform\app\static/uploads\images\664d03530c114597962e196351961efc_00029-730120803.png
2025-03-30 23:00:10,980 [INFO] [content:203] - 封面图片上传成功，路径: uploads/images/664d03530c114597962e196351961efc_00029-730120803.png
2025-03-30 23:00:10,986 [INFO] [content:282] - 内容更新成功：ID=7, 标题=1
2025-03-30 23:01:24,571 [INFO] [content:282] - 内容更新成功：ID=7, 标题=1
2025-03-30 23:01:59,411 [INFO] [content:346] - 处理单个图片上传: 00030-2459595187.png
2025-03-30 23:01:59,842 [INFO] [file_handlers:193] - 文件已保存: g:\项目赛\heritage_platform\app\static/uploads\images\191b826053a443768f94ebfcd14abf26_00030-2459595187.png
2025-03-30 23:01:59,843 [INFO] [content:349] - 图片上传成功，路径: uploads/images/191b826053a443768f94ebfcd14abf26_00030-2459595187.png
2025-03-30 23:01:59,849 [INFO] [content:400] - 内容创建成功：ID=8, 标题=欢迎
2025-03-30 23:07:45,772 [INFO] [content:386] - 处理视频上传: 屏幕录制 2024-10-20 013317.mp4
2025-03-30 23:07:45,784 [INFO] [file_handlers:193] - 文件已保存: g:\项目赛\heritage_platform\app\static/uploads\videos\8560dd94c2604c30b728bae9534f44c6_2024-10-20_013317.mp4
2025-03-30 23:07:45,785 [INFO] [content:389] - 视频上传成功，路径: uploads/videos/8560dd94c2604c30b728bae9534f44c6_2024-10-20_013317.mp4
2025-03-30 23:07:45,794 [INFO] [content:400] - 内容创建成功：ID=9, 标题=欢迎
2025-03-30 23:24:48,649 [INFO] [content:201] - 处理封面图片上传: 00070-3740821447.png
2025-03-30 23:24:48,958 [INFO] [file_handlers:193] - 文件已保存: g:\项目赛\heritage_platform\app\static/uploads\images\b6ffd47005c84dbc8561eebedd160240_00070-3740821447.png
2025-03-30 23:24:48,959 [INFO] [content:204] - 封面图片上传成功，路径: uploads/images/b6ffd47005c84dbc8561eebedd160240_00070-3740821447.png
2025-03-30 23:24:48,967 [INFO] [content:282] - 内容更新成功：ID=9, 标题=欢迎
2025-03-30 23:25:07,590 [WARNING] [content:396] - 未检测到视频上传
2025-03-30 23:25:07,599 [INFO] [content:400] - 内容创建成功：ID=10, 标题=1
2025-03-30 23:27:44,060 [INFO] [socket_events:17] - 用户 yuqie (ID: 1) 已连接
2025-03-30 23:27:44,168 [INFO] [socket_events:37] - 用户 yuqie (ID: 1) 加入群组聊天室: group_1
2025-03-30 23:27:47,151 [INFO] [socket_events:25] - 用户 yuqie (ID: 1) 已断开连接
2025-03-30 23:30:28,413 [INFO] [socket_events:17] - 用户 yuqie (ID: 1) 已连接
2025-03-30 23:30:28,525 [INFO] [socket_events:37] - 用户 yuqie (ID: 1) 加入群组聊天室: group_1
2025-03-30 23:30:54,619 [INFO] [socket_events:25] - 用户 yuqie (ID: 1) 已断开连接
2025-03-30 23:31:02,845 [INFO] [socket_events:17] - 用户 yuqie (ID: 1) 已连接
2025-03-30 23:31:02,874 [INFO] [socket_events:37] - 用户 yuqie (ID: 1) 加入群组聊天室: group_1
2025-03-30 23:31:03,461 [INFO] [socket_events:25] - 用户 yuqie (ID: 1) 已断开连接
2025-03-30 23:31:12,439 [INFO] [socket_events:17] - 用户 yuqie (ID: 1) 已连接
2025-03-30 23:31:12,628 [INFO] [socket_events:37] - 用户 yuqie (ID: 1) 加入群组聊天室: group_1
2025-03-30 23:31:15,922 [INFO] [socket_events:25] - 用户 yuqie (ID: 1) 已断开连接
2025-03-30 23:31:18,919 [INFO] [socket_events:17] - 用户 yuqie (ID: 1) 已连接
2025-03-30 23:31:18,940 [INFO] [socket_events:37] - 用户 yuqie (ID: 1) 加入群组聊天室: group_1
2025-03-30 23:33:09,337 [INFO] [socket_events:25] - 用户 yuqie (ID: 1) 已断开连接
2025-03-30 23:33:09,835 [INFO] [socket_events:17] - 用户 yuqie (ID: 1) 已连接
2025-03-30 23:33:09,872 [INFO] [socket_events:37] - 用户 yuqie (ID: 1) 加入群组聊天室: group_1
2025-03-30 23:33:22,207 [INFO] [socket_events:25] - 用户 yuqie (ID: 1) 已断开连接
2025-03-30 23:33:42,557 [INFO] [socket_events:17] - 用户 yuqie (ID: 1) 已连接
2025-03-30 23:33:42,582 [INFO] [socket_events:37] - 用户 yuqie (ID: 1) 加入群组聊天室: group_1
2025-03-30 23:33:44,691 [INFO] [socket_events:25] - 用户 yuqie (ID: 1) 已断开连接
2025-03-30 23:35:45,675 [INFO] [content:226] - 处理单个图片上传: 00073-3838779906 - 副本.png
2025-03-30 23:35:46,145 [INFO] [file_handlers:193] - 文件已保存: g:\项目赛\heritage_platform\app\static/uploads\images\3d1d279e9f8b4476bbb7071fc9955a93_00073-3838779906_-_.png
2025-03-30 23:35:46,146 [INFO] [content:229] - 图片上传成功，路径: uploads/images/3d1d279e9f8b4476bbb7071fc9955a93_00073-3838779906_-_.png
2025-03-30 23:35:46,154 [INFO] [content:282] - 内容更新成功：ID=1, 标题=测试
2025-03-30 23:36:22,119 [INFO] [content:226] - 处理单个图片上传: 00088-3838779921.png
2025-03-30 23:36:22,686 [INFO] [file_handlers:193] - 文件已保存: g:\项目赛\heritage_platform\app\static/uploads\images\cb8dd088605d4219b7a6a35ac16e36b7_00088-3838779921.png
2025-03-30 23:36:22,687 [INFO] [content:229] - 图片上传成功，路径: uploads/images/cb8dd088605d4219b7a6a35ac16e36b7_00088-3838779921.png
2025-03-30 23:36:22,696 [INFO] [content:282] - 内容更新成功：ID=1, 标题=测试
2025-03-30 23:36:52,989 [INFO] [content:226] - 处理单个图片上传: 00080-3838779913.png
2025-03-30 23:36:53,427 [INFO] [file_handlers:193] - 文件已保存: g:\项目赛\heritage_platform\app\static/uploads\images\331e6939bdef47779f2e9415ef4e574a_00080-3838779913.png
2025-03-30 23:36:53,427 [INFO] [content:229] - 图片上传成功，路径: uploads/images/331e6939bdef47779f2e9415ef4e574a_00080-3838779913.png
2025-03-30 23:36:53,433 [INFO] [content:282] - 内容更新成功：ID=7, 标题=1
2025-03-30 23:37:50,857 [INFO] [content:226] - 处理单个图片上传: 00088-3838779921.png
2025-03-30 23:37:51,408 [INFO] [file_handlers:193] - 文件已保存: g:\项目赛\heritage_platform\app\static/uploads\images\bdd9c77b0d494a3584fcf6d80f2c8b39_00088-3838779921.png
2025-03-30 23:37:51,409 [INFO] [content:229] - 图片上传成功，路径: uploads/images/bdd9c77b0d494a3584fcf6d80f2c8b39_00088-3838779921.png
2025-03-30 23:37:51,415 [INFO] [content:282] - 内容更新成功：ID=7, 标题=1
2025-03-30 23:39:17,232 [INFO] [content:226] - 处理单个图片上传: 00059-3129917822.png
2025-03-30 23:39:17,789 [INFO] [file_handlers:193] - 文件已保存: g:\项目赛\heritage_platform\app\static/uploads\images\7ef1b11c7174459abf2bd9f2a67778fa_00059-3129917822.png
2025-03-30 23:39:17,790 [INFO] [content:229] - 图片上传成功，路径: uploads/images/7ef1b11c7174459abf2bd9f2a67778fa_00059-3129917822.png
2025-03-30 23:39:17,798 [INFO] [content:282] - 内容更新成功：ID=7, 标题=1
2025-03-30 23:42:13,659 [INFO] [content:346] - 处理单个图片上传: 00104-3838779937.png
2025-03-30 23:42:14,060 [INFO] [file_handlers:193] - 文件已保存: g:\项目赛\heritage_platform\app\static/uploads\images\654aa25e4c8644ac9a197f4e1d875d1d_00104-3838779937.png
2025-03-30 23:42:14,061 [INFO] [content:349] - 图片上传成功，路径: uploads/images/654aa25e4c8644ac9a197f4e1d875d1d_00104-3838779937.png
2025-03-30 23:42:14,068 [INFO] [content:400] - 内容创建成功：ID=11, 标题=欢迎
2025-03-30 23:45:42,221 [INFO] [content:299] - 内容更新成功：ID=11, 标题=欢迎
2025-03-30 23:57:56,173 [INFO] [content:264] - 内容更新成功：ID=11, 标题=欢迎
2025-03-31 00:27:06,310 [INFO] [content:264] - 内容更新成功：ID=11, 标题=欢迎
2025-03-31 00:28:28,503 [INFO] [content:226] - 处理单个图片上传: 00090-3838779923.png
2025-03-31 00:28:28,897 [INFO] [file_handlers:193] - 文件已保存: g:\项目赛\heritage_platform\app\static/uploads\images\4b77202d98c347d3a0080a2bc010cf22_00090-3838779923.png
2025-03-31 00:28:28,898 [INFO] [content:229] - 图片上传成功，路径: uploads/images/4b77202d98c347d3a0080a2bc010cf22_00090-3838779923.png
2025-03-31 00:28:28,908 [INFO] [content:282] - 内容更新成功：ID=11, 标题=欢迎
2025-03-31 00:32:06,135 [INFO] [content:282] - 内容更新成功：ID=11, 标题=欢迎
2025-03-31 00:35:14,551 [INFO] [content:225] - 处理多图片上传
2025-03-31 00:35:14,551 [INFO] [content:229] - 处理多图片上传: 00087-3838779920.png
2025-03-31 00:35:14,956 [INFO] [file_handlers:193] - 文件已保存: g:\项目赛\heritage_platform\app\static/uploads\images\0a1799a1c0414680b92d344c4ba89b38_00087-3838779920.png
2025-03-31 00:35:14,958 [INFO] [content:232] - 图片上传成功，路径: uploads/images/0a1799a1c0414680b92d344c4ba89b38_00087-3838779920.png
2025-03-31 00:35:14,960 [INFO] [content:229] - 处理多图片上传: 00088-3838779921.png
2025-03-31 00:35:15,520 [INFO] [file_handlers:193] - 文件已保存: g:\项目赛\heritage_platform\app\static/uploads\images\b714e170fa39423186315662c0f277ad_00088-3838779921.png
2025-03-31 00:35:15,521 [INFO] [content:232] - 图片上传成功，路径: uploads/images/b714e170fa39423186315662c0f277ad_00088-3838779921.png
2025-03-31 00:35:15,530 [INFO] [content:265] - 内容更新成功：ID=11, 标题=欢迎
2025-03-31 00:41:22,768 [INFO] [content:225] - 处理多图片上传
2025-03-31 00:41:22,769 [INFO] [content:229] - 处理多图片上传: 00078-3838779911.png
2025-03-31 00:41:23,215 [INFO] [file_handlers:193] - 文件已保存: g:\项目赛\heritage_platform\app\static/uploads\images\bcaba8508dff4cd5aca1dc217f26ec30_00078-3838779911.png
2025-03-31 00:41:23,216 [INFO] [content:232] - 图片上传成功，路径: uploads/images/bcaba8508dff4cd5aca1dc217f26ec30_00078-3838779911.png
2025-03-31 00:41:23,217 [INFO] [content:229] - 处理多图片上传: 00079-3838779912.png
2025-03-31 00:41:23,603 [INFO] [file_handlers:193] - 文件已保存: g:\项目赛\heritage_platform\app\static/uploads\images\8f9ccf02d86b4cb4b9a5f4438386debc_00079-3838779912.png
2025-03-31 00:41:23,604 [INFO] [content:232] - 图片上传成功，路径: uploads/images/8f9ccf02d86b4cb4b9a5f4438386debc_00079-3838779912.png
2025-03-31 00:41:23,604 [INFO] [content:229] - 处理多图片上传: 00080-3838779913.png
2025-03-31 00:41:24,026 [INFO] [file_handlers:193] - 文件已保存: g:\项目赛\heritage_platform\app\static/uploads\images\9aab5729638749bbab4cbdebe2122d1f_00080-3838779913.png
2025-03-31 00:41:24,027 [INFO] [content:232] - 图片上传成功，路径: uploads/images/9aab5729638749bbab4cbdebe2122d1f_00080-3838779913.png
2025-03-31 00:41:24,035 [INFO] [content:265] - 内容更新成功：ID=11, 标题=欢迎
2025-03-31 17:35:31,849 [INFO] [content:36] - 处理搜索请求: '武术'
2025-03-31 17:40:09,485 [INFO] [content:36] - 处理搜索请求: '武术'
2025-03-31 22:13:19,822 [ERROR] [ai_assistant:177] - 获取会话列表失败: (pymysql.err.ProgrammingError) (1146, "Table 'heritage_platform.chat_sessions' doesn't exist")
[SQL: SELECT chat_sessions.id AS chat_sessions_id, chat_sessions.user_id AS chat_sessions_user_id, chat_sessions.title AS chat_sessions_title, chat_sessions.created_at AS chat_sessions_created_at, chat_sessions.updated_at AS chat_sessions_updated_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = %(user_id_1)s ORDER BY chat_sessions.updated_at DESC]
[parameters: {'user_id_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-03-31 22:51:37,687 [ERROR] [ai_assistant:177] - 获取会话列表失败: (pymysql.err.ProgrammingError) (1146, "Table 'heritage_platform.chat_sessions' doesn't exist")
[SQL: SELECT chat_sessions.id AS chat_sessions_id, chat_sessions.user_id AS chat_sessions_user_id, chat_sessions.title AS chat_sessions_title, chat_sessions.created_at AS chat_sessions_created_at, chat_sessions.updated_at AS chat_sessions_updated_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = %(user_id_1)s ORDER BY chat_sessions.updated_at DESC]
[parameters: {'user_id_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-03-31 22:52:17,634 [ERROR] [ai_assistant:177] - 获取会话列表失败: (pymysql.err.ProgrammingError) (1146, "Table 'heritage_platform.chat_sessions' doesn't exist")
[SQL: SELECT chat_sessions.id AS chat_sessions_id, chat_sessions.user_id AS chat_sessions_user_id, chat_sessions.title AS chat_sessions_title, chat_sessions.created_at AS chat_sessions_created_at, chat_sessions.updated_at AS chat_sessions_updated_at 
FROM chat_sessions 
WHERE chat_sessions.user_id = %(user_id_1)s ORDER BY chat_sessions.updated_at DESC]
[parameters: {'user_id_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-03-31 23:21:45,189 [ERROR] [ai_assistant:60] - 创建会话失败: 'coroutine' object has no attribute 'id'
2025-05-06 14:45:29,913 [WARNING] [security_config:68] - Redis连接失败，将使用内存存储: Error 10061 connecting to localhost:6379. 由于目标计算机积极拒绝，无法连接。.
2025-05-06 14:46:38,496 [WARNING] [security_config:71] - 未配置Redis URL，将使用内存存储
