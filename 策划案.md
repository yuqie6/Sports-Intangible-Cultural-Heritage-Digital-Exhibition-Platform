# ä½“è‚²éé—æ•°å­—å±•ç¤ºå¹³å° - æœ€ç»ˆé¡¹ç›®ç­–åˆ’æ–¹æ¡ˆ

|  é¡¹ç›®åŸºæœ¬ä¿¡æ¯  |  è¯¦æƒ…  |
|--------------|--------|
| **é¡¹ç›®åç§°** | ä½“è‚²éé—æ•°å­—å±•ç¤ºå¹³å° |
| **å¼€å‘å‘¨æœŸ** | 2025å¹´3æœˆ24æ—¥ - 2025å¹´4æœˆ24æ—¥ï¼ˆ1ä¸ªæœˆï¼‰ |
| **æŠ€æœ¯æ ˆ** | Python + Flask + MySQL + Bootstrap |
| **å¼€å‘è€…** | yuqie6ï¼ˆæ•°æ®å·¥ç¨‹ä¸å¤§æ•°æ®æŠ€æœ¯ä¸“ä¸šï¼‰ |
| **ç«èµ›ç›®æ ‡** | "ç¼–ç æœªæ¥ï¼Œæ™ºåˆ›æ— é™"2025å¹´ç«èµ›åˆ›æ„èµ›é“ |

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

**æ ¸å¿ƒå®šä½**ï¼šåˆ›å»ºä¸€ä¸ªä½“è‚²éé—æ•°å­—å±•ç¤ºä¸äº¤æµå¹³å°ï¼Œè¿æ¥è¯¾å ‚å­¦ä¹ ä¸æ•°å­—åŒ–åˆ†äº«ã€‚

**ä»·å€¼ä¸»å¼ **ï¼š
- ä¸ºä½“è‚²éé—è¯¾ç¨‹æä¾›æ•°å­—åŒ–è¾…åŠ©å·¥å…·
- ä¿ƒè¿›ä½“è‚²éé—æ–‡åŒ–çš„ä¼ æ’­ä¸ä¿æŠ¤
- å»ºç«‹å­¦ä¹ è€…ç¤¾åŒºï¼Œå®ç°çŸ¥è¯†äº¤æµ

**æ ¸å¿ƒç”¨æˆ·**ï¼š
- å­¦ç”Ÿï¼šè®°å½•å­¦ä¹ è¿‡ç¨‹ï¼Œåˆ†äº«å­¦ä¹ æˆæœ
- æ•™å¸ˆï¼šå‘å¸ƒæ•™å­¦å†…å®¹ï¼Œç®¡ç†å­¦ä¹ ä»»åŠ¡
- ç®¡ç†å‘˜ï¼šç»´æŠ¤å¹³å°å†…å®¹ä¸ç”¨æˆ·

## ğŸ¯ MVPåŠŸèƒ½èŒƒå›´

![åŠŸèƒ½èŒƒå›´å›¾](https://i.imgur.com/rSy89Ne.png)

### 1. ç”¨æˆ·ç³»ç»Ÿ
- âœ… ç”¨æˆ·æ³¨å†Œä¸ç™»å½•
- âœ… è§’è‰²åŒºåˆ†ï¼ˆå­¦ç”Ÿ/æ•™å¸ˆ/ç®¡ç†å‘˜ï¼‰
- âœ… ä¸ªäººèµ„æ–™ç®¡ç†

### 2. å†…å®¹ç®¡ç†ç³»ç»Ÿ
- âœ… éé—é¡¹ç›®å±•ç¤º
- âœ… æ–‡ç« /è§†é¢‘ä¸Šä¼ ä¸å±•ç¤º
- âœ… å†…å®¹åˆ†ç±»ä¸æ£€ç´¢

### 3. äº’åŠ¨äº¤æµç³»ç»Ÿ
- âœ… è¯„è®ºåŠŸèƒ½
- âœ… ç‚¹èµåŠŸèƒ½
- âœ… å†…å®¹æ”¶è—

## ğŸ—ºï¸ æŠ€æœ¯æ¶æ„

```
ä½“è‚²éé—æ•°å­—å±•ç¤ºå¹³å°
â”œâ”€â”€ å‰ç«¯å±‚
â”‚   â”œâ”€â”€ HTML/CSS (Bootstrap 5)
â”‚   â”œâ”€â”€ JavaScript (åŸºç¡€äº¤äº’)
â”‚   â””â”€â”€ Jinja2 æ¨¡æ¿
â”œâ”€â”€ åº”ç”¨å±‚
â”‚   â”œâ”€â”€ Flask Webæ¡†æ¶
â”‚   â”œâ”€â”€ Flaskæ‰©å±•
â”‚   â”‚   â”œâ”€â”€ Flask-Login (ç”¨æˆ·è®¤è¯)
â”‚   â”‚   â”œâ”€â”€ Flask-WTF (è¡¨å•å¤„ç†)
â”‚   â”‚   â””â”€â”€ Flask-SQLAlchemy (ORM)
â”‚   â””â”€â”€ ä¸šåŠ¡é€»è¾‘æ¨¡å—
â”œâ”€â”€ æ•°æ®å±‚
â”‚   â”œâ”€â”€ MySQLæ•°æ®åº“
â”‚   â””â”€â”€ æ–‡ä»¶å­˜å‚¨ç³»ç»Ÿ
â””â”€â”€ éƒ¨ç½²å±‚
    â””â”€â”€ æœ¬åœ°å¼€å‘ç¯å¢ƒ
```

## ğŸ“Š æ•°æ®åº“è®¾è®¡

```
ç”¨æˆ·è¡¨ (users)
â”œâ”€â”€ id: INT PRIMARY KEY AUTO_INCREMENT
â”œâ”€â”€ username: VARCHAR(50) UNIQUE NOT NULL
â”œâ”€â”€ password: VARCHAR(255) NOT NULL
â”œâ”€â”€ email: VARCHAR(100) UNIQUE
â”œâ”€â”€ role: VARCHAR(20) DEFAULT 'student'  # admin, teacher, student
â”œâ”€â”€ avatar: VARCHAR(255)
â””â”€â”€ created_at: DATETIME DEFAULT CURRENT_TIMESTAMP

éé—é¡¹ç›®è¡¨ (heritage_items)
â”œâ”€â”€ id: INT PRIMARY KEY AUTO_INCREMENT
â”œâ”€â”€ name: VARCHAR(100) NOT NULL
â”œâ”€â”€ category: VARCHAR(50) NOT NULL
â”œâ”€â”€ description: TEXT
â”œâ”€â”€ cover_image: VARCHAR(255)
â”œâ”€â”€ created_by: INT (FOREIGN KEY -> users.id)
â””â”€â”€ created_at: DATETIME DEFAULT CURRENT_TIMESTAMP

å†…å®¹è¡¨ (contents)
â”œâ”€â”€ id: INT PRIMARY KEY AUTO_INCREMENT
â”œâ”€â”€ title: VARCHAR(100) NOT NULL
â”œâ”€â”€ heritage_id: INT (FOREIGN KEY -> heritage_items.id)
â”œâ”€â”€ user_id: INT (FOREIGN KEY -> users.id)
â”œâ”€â”€ content_type: VARCHAR(20) NOT NULL  # article, video, image
â”œâ”€â”€ text_content: TEXT  # for article type
â”œâ”€â”€ file_path: VARCHAR(255)  # for video and image type
â”œâ”€â”€ created_at: DATETIME DEFAULT CURRENT_TIMESTAMP
â””â”€â”€ updated_at: DATETIME ON UPDATE CURRENT_TIMESTAMP

è¯„è®ºè¡¨ (comments)
â”œâ”€â”€ id: INT PRIMARY KEY AUTO_INCREMENT
â”œâ”€â”€ user_id: INT (FOREIGN KEY -> users.id)
â”œâ”€â”€ content_id: INT (FOREIGN KEY -> contents.id)
â”œâ”€â”€ text: TEXT NOT NULL
â””â”€â”€ created_at: DATETIME DEFAULT CURRENT_TIMESTAMP

ç‚¹èµè¡¨ (likes)
â”œâ”€â”€ id: INT PRIMARY KEY AUTO_INCREMENT
â”œâ”€â”€ user_id: INT (FOREIGN KEY -> users.id)
â”œâ”€â”€ content_id: INT (FOREIGN KEY -> contents.id)
â””â”€â”€ created_at: DATETIME DEFAULT CURRENT_TIMESTAMP

æ”¶è—è¡¨ (favorites)
â”œâ”€â”€ id: INT PRIMARY KEY AUTO_INCREMENT
â”œâ”€â”€ user_id: INT (FOREIGN KEY -> users.id)
â”œâ”€â”€ content_id: INT (FOREIGN KEY -> contents.id)
â””â”€â”€ created_at: DATETIME DEFAULT CURRENT_TIMESTAMP
```

## ğŸ“‚ é¡¹ç›®ç»“æ„

```
heritage_platform/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ __init__.py           # åº”ç”¨åˆå§‹åŒ–
â”‚   â”œâ”€â”€ models/               # æ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ user.py           # ç”¨æˆ·æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ heritage.py       # éé—é¡¹ç›®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ content.py        # å†…å®¹æ¨¡å‹
â”‚   â”‚   â””â”€â”€ interaction.py    # äº’åŠ¨æ¨¡å‹(è¯„è®º/ç‚¹èµ)
â”‚   â”œâ”€â”€ routes/               # è·¯ç”±æ§åˆ¶
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ auth.py           # è®¤è¯è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ main.py           # ä¸»é¡µè·¯ç”±
â”‚   â”‚   â”œâ”€â”€ heritage.py       # éé—é¡¹ç›®è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ content.py        # å†…å®¹ç®¡ç†è·¯ç”±
â”‚   â”‚   â””â”€â”€ user.py           # ç”¨æˆ·ç®¡ç†è·¯ç”±
â”‚   â”œâ”€â”€ static/               # é™æ€æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ css/
â”‚   â”‚   â”œâ”€â”€ js/
â”‚   â”‚   â”œâ”€â”€ img/
â”‚   â”‚   â””â”€â”€ uploads/          # ç”¨æˆ·ä¸Šä¼ æ–‡ä»¶
â”‚   â”‚       â”œâ”€â”€ images/
â”‚   â”‚       â””â”€â”€ videos/
â”‚   â”œâ”€â”€ templates/            # HTMLæ¨¡æ¿
â”‚   â”‚   â”œâ”€â”€ base.html         # åŸºç¡€æ¨¡æ¿
â”‚   â”‚   â”œâ”€â”€ auth/             # è®¤è¯é¡µé¢
â”‚   â”‚   â”œâ”€â”€ main/             # ä¸»é¡µ
â”‚   â”‚   â”œâ”€â”€ heritage/         # éé—é¡¹ç›®é¡µé¢
â”‚   â”‚   â”œâ”€â”€ content/          # å†…å®¹é¡µé¢
â”‚   â”‚   â””â”€â”€ user/             # ç”¨æˆ·é¡µé¢
â”‚   â”œâ”€â”€ forms/                # è¡¨å•ç±»
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ auth.py           # è®¤è¯è¡¨å•
â”‚   â”‚   â”œâ”€â”€ heritage.py       # éé—é¡¹ç›®è¡¨å•
â”‚   â”‚   â””â”€â”€ content.py        # å†…å®¹è¡¨å•
â”‚   â””â”€â”€ utils/                # å·¥å…·å‡½æ•°
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”œâ”€â”€ decorators.py     # è‡ªå®šä¹‰è£…é¥°å™¨
â”‚       â””â”€â”€ file_handlers.py  # æ–‡ä»¶å¤„ç†å‡½æ•°
â”œâ”€â”€ config.py                 # é…ç½®æ–‡ä»¶
â”œâ”€â”€ requirements.txt          # ä¾èµ–åˆ—è¡¨
â”œâ”€â”€ run.py                    # å¯åŠ¨è„šæœ¬
â””â”€â”€ README.md                 # é¡¹ç›®è¯´æ˜
```

## ğŸ“… è¯¦ç»†å¼€å‘æ—¶é—´è¡¨

### ç¬¬1é˜¶æ®µï¼šåŸºç¡€æ¶æ„æ­å»ºï¼ˆ3/24-3/30ï¼‰

| æ—¥æœŸ | ä»»åŠ¡ | ç›®æ ‡ |
|------|------|------|
| 3/24ï¼ˆä»Šå¤©ï¼‰ | ç¯å¢ƒé…ç½®ä¸é¡¹ç›®åˆå§‹åŒ– | å®Œæˆå¼€å‘ç¯å¢ƒæ­å»ºå’Œé¡¹ç›®åŸºç¡€ç»“æ„ |
| 3/25-3/26 | æ•°æ®åº“è®¾è®¡ä¸æ¨¡å‹åˆ›å»º | å®Œæˆä¸»è¦æ•°æ®æ¨¡å‹è®¾è®¡ä¸å®ç° |
| 3/27-3/28 | ç”¨æˆ·è®¤è¯ç³»ç»Ÿå®ç° | å®Œæˆæ³¨å†Œã€ç™»å½•åŠŸèƒ½ |
| 3/29-3/30 | åŸºç¡€å¯¼èˆªä¸å¸ƒå±€è®¾è®¡ | å®Œæˆä¸»è¦é¡µé¢å¯¼èˆªä¸å¸ƒå±€ |

### ç¬¬2é˜¶æ®µï¼šæ ¸å¿ƒåŠŸèƒ½å¼€å‘ï¼ˆ3/31-4/9ï¼‰

| æ—¥æœŸ | ä»»åŠ¡ | ç›®æ ‡ |
|------|------|------|
| 3/31-4/1 | éé—é¡¹ç›®æ¨¡å—å¼€å‘ | å®ç°éé—é¡¹ç›®çš„æ·»åŠ å’Œå±•ç¤º |
| 4/2-4/4 | å†…å®¹ç®¡ç†ç³»ç»Ÿå¼€å‘ | å®ç°æ–‡ç« /è§†é¢‘çš„ä¸Šä¼ ä¸å±•ç¤º |
| 4/5-4/6 | æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½å®Œå–„ | å®ç°å›¾ç‰‡å’Œè§†é¢‘çš„ä¸Šä¼ ä¸å­˜å‚¨ |
| 4/7-4/9 | è¯„è®ºç³»ç»Ÿå®ç° | å®ŒæˆåŸºç¡€è¯„è®ºåŠŸèƒ½ |

### ç¬¬3é˜¶æ®µï¼šåŠŸèƒ½å®Œå–„ä¸ä¼˜åŒ–ï¼ˆ4/10-4/17ï¼‰

| æ—¥æœŸ | ä»»åŠ¡ | ç›®æ ‡ |
|------|------|------|
| 4/10-4/11 | ç‚¹èµä¸æ”¶è—åŠŸèƒ½ | å®ç°å†…å®¹äº’åŠ¨åŠŸèƒ½ |
| 4/12-4/13 | æœç´¢ä¸ç­›é€‰åŠŸèƒ½ | å®ç°å†…å®¹æ£€ç´¢åŠŸèƒ½ |
| 4/14-4/15 | ç”¨æˆ·æƒé™ä¸è§’è‰²ç®¡ç† | å®Œå–„æƒé™æ§åˆ¶ç³»ç»Ÿ |
| 4/16-4/17 | ç•Œé¢ç¾åŒ–ä¸ç”¨æˆ·ä½“éªŒä¼˜åŒ– | æå‡ç•Œé¢è®¾è®¡ä¸äº¤äº’ä½“éªŒ |

### ç¬¬4é˜¶æ®µï¼šæµ‹è¯•ä¸ç«èµ›å‡†å¤‡ï¼ˆ4/18-4/24ï¼‰

| æ—¥æœŸ | ä»»åŠ¡ | ç›®æ ‡ |
|------|------|------|
| 4/18-4/19 | ç³»ç»Ÿæµ‹è¯•ä¸Bugä¿®å¤ | ç¡®ä¿ç³»ç»Ÿç¨³å®šè¿è¡Œ |
| 4/20-4/21 | æ•°æ®å‡†å¤‡ä¸ç¤ºä¾‹å†…å®¹ | å‡†å¤‡æ¼”ç¤ºç”¨æ•°æ® |
| 4/22-4/23 | é¡¹ç›®æ–‡æ¡£ç¼–å†™ | å®ŒæˆæŠ€æœ¯æ–‡æ¡£å’Œç”¨æˆ·æ‰‹å†Œ |
| 4/24 | ç«èµ›ææ–™å‡†å¤‡ | å®Œæˆæ¼”ç¤ºè§†é¢‘å’Œç­”è¾©PPT |

## ğŸš€ ä»Šæ—¥ï¼ˆ3/24ï¼‰å¼€å§‹è¡ŒåŠ¨è®¡åˆ’

### 1. ç¯å¢ƒé…ç½®

```bash
# åˆ›å»ºé¡¹ç›®ç›®å½•
mkdir heritage_platform
cd heritage_platform

# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv venv
# Windowsæ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
venv\Scripts\activate  
# Mac/Linuxæ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
# source venv/bin/activate

# å®‰è£…å¿…è¦ä¾èµ–
pip install flask flask-login flask-sqlalchemy flask-wtf pymysql pillow email_validator

# åˆ›å»ºé¡¹ç›®åŸºæœ¬ç»“æ„
mkdir -p app/models app/routes app/templates app/static app/forms app/utils
touch app/__init__.py config.py run.py requirements.txt
```

### 2. é…ç½®æ–‡ä»¶åˆ›å»º

åˆ›å»º`config.py`æ–‡ä»¶ï¼Œæ·»åŠ åŸºæœ¬é…ç½®ï¼š

```python
import os
basedir = os.path.abspath(os.path.dirname(__file__))

class Config:
    # åº”ç”¨é…ç½®
    SECRET_KEY = os.environ.get('SECRET_KEY') or 'dev-key-for-testing'
    
    # æ•°æ®åº“é…ç½®
    SQLALCHEMY_DATABASE_URI = 'mysql+pymysql://username:password@localhost/heritage_platform'
    SQLALCHEMY_TRACK_MODIFICATIONS = False
    
    # ä¸Šä¼ æ–‡ä»¶é…ç½®
    UPLOAD_FOLDER = os.path.join(basedir, 'app/static/uploads')
    MAX_CONTENT_LENGTH = 16 * 1024 * 1024  # 16MBé™åˆ¶
    
    @staticmethod
    def init_app(app):
        # ç¡®ä¿ä¸Šä¼ ç›®å½•å­˜åœ¨
        os.makedirs(os.path.join(app.static_folder, 'uploads/images'), exist_ok=True)
        os.makedirs(os.path.join(app.static_folder, 'uploads/videos'), exist_ok=True)
```

### 3. åº”ç”¨åˆå§‹åŒ–

åˆ›å»º`app/__init__.py`æ–‡ä»¶ï¼Œåˆå§‹åŒ–Flaskåº”ç”¨ï¼š

```python
from flask import Flask
from flask_sqlalchemy import SQLAlchemy
from flask_login import LoginManager
from config import Config

# åˆå§‹åŒ–æ‰©å±•
db = SQLAlchemy()
login_manager = LoginManager()
login_manager.login_view = 'auth.login'
login_manager.login_message = 'è¯·å…ˆç™»å½•å†è®¿é—®æ­¤é¡µé¢'
login_manager.login_message_category = 'info'

def create_app(config_class=Config):
    app = Flask(__name__)
    app.config.from_object(config_class)
    
    # åˆå§‹åŒ–æ‰©å±•
    db.init_app(app)
    login_manager.init_app(app)
    
    # æ³¨å†Œè“å›¾
    from app.routes.main import main_bp
    from app.routes.auth import auth_bp
    
    app.register_blueprint(main_bp)
    app.register_blueprint(auth_bp, url_prefix='/auth')
    
    # åˆ›å»ºæ–‡ä»¶ä¸Šä¼ ç›®å½•
    Config.init_app(app)
    
    return app
```

### 4. å¯åŠ¨è„šæœ¬

åˆ›å»º`run.py`æ–‡ä»¶ï¼Œä½œä¸ºåº”ç”¨å…¥å£ï¼š

```python
from app import create_app, db
from flask_migrate import Migrate

app = create_app()
migrate = Migrate(app, db)

@app.shell_context_processor
def make_shell_context():
    return dict(db=db)

if __name__ == '__main__':
    app.run(debug=True)
```

### 5. åˆ›å»ºåŸºæœ¬æ•°æ®æ¨¡å‹

åˆ›å»º`app/models/user.py`æ–‡ä»¶ï¼Œå®ç°ç”¨æˆ·æ¨¡å‹ï¼š

```python
from app import db, login_manager
from werkzeug.security import generate_password_hash, check_password_hash
from flask_login import UserMixin
from datetime import datetime

class User(UserMixin, db.Model):
    __tablename__ = 'users'
    
    id = db.Column(db.Integer, primary_key=True)
    username = db.Column(db.String(50), unique=True, nullable=False)
    email = db.Column(db.String(100), unique=True, nullable=False)
    password_hash = db.Column(db.String(128))
    role = db.Column(db.String(20), default='student')  # admin, teacher, student
    avatar = db.Column(db.String(255))
    created_at = db.Column(db.DateTime, default=datetime.utcnow)
    
    @property
    def password(self):
        raise AttributeError('password is not a readable attribute')
        
    @password.setter
    def password(self, password):
        self.password_hash = generate_password_hash(password)
        
    def verify_password(self, password):
        return check_password_hash(self.password_hash, password)
    
    @property
    def is_admin(self):
        return self.role == 'admin'
    
    @property
    def is_teacher(self):
        return self.role == 'teacher'

@login_manager.user_loader
def load_user(user_id):
    return User.query.get(int(user_id))
```

## ğŸ“… åç»­å¼€å‘è®¡åˆ’

### ç¬¬1é˜¶æ®µå…³é”®ä»»åŠ¡

1. **åˆ›å»ºå…¶ä½™æ•°æ®æ¨¡å‹**
   - éé—é¡¹ç›®æ¨¡å‹
   - å†…å®¹æ¨¡å‹
   - è¯„è®ºä¸ç‚¹èµæ¨¡å‹

2. **å®ç°è®¤è¯åŠŸèƒ½**
   - æ³¨å†Œè¡¨å•ä¸è§†å›¾
   - ç™»å½•è¡¨å•ä¸è§†å›¾
   - ç”¨æˆ·ä¸ªäººä¿¡æ¯é¡µé¢

3. **åˆ›å»ºåŸºç¡€é¡µé¢å¸ƒå±€**
   - ä¸»é¡µæ¨¡æ¿
   - å¯¼èˆªæ 
   - åŸºç¡€CSSæ ·å¼

## ğŸ“ æ ¸å¿ƒåŠŸèƒ½å®ç°æŒ‡å—

### 1. æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½

åœ¨`app/utils/file_handlers.py`ä¸­å®ç°æ–‡ä»¶ä¸Šä¼ å¤„ç†ï¼š

```python
import os
import uuid
from werkzeug.utils import secure_filename
from flask import current_app

ALLOWED_IMAGE_EXTENSIONS = {'png', 'jpg', 'jpeg', 'gif'}
ALLOWED_VIDEO_EXTENSIONS = {'mp4', 'mov', 'avi', 'wmv'}

def allowed_file(filename, allowed_extensions):
    """æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å…è®¸ä¸Šä¼ """
    return '.' in filename and \
           filename.rsplit('.', 1)[1].lower() in allowed_extensions

def save_file(file, file_type):
    """ä¿å­˜ä¸Šä¼ çš„æ–‡ä»¶
    
    Args:
        file: æ–‡ä»¶å¯¹è±¡
        file_type: æ–‡ä»¶ç±»å‹('image' æˆ– 'video')
        
    Returns:
        ä¿å­˜æˆåŠŸè¿”å›æ–‡ä»¶è·¯å¾„ï¼Œå¤±è´¥è¿”å›None
    """
    if not file:
        return None
    
    # æ£€æŸ¥æ–‡ä»¶ç±»å‹
    if file_type == 'image':
        allowed_extensions = ALLOWED_IMAGE_EXTENSIONS
        save_folder = 'images'
    elif file_type == 'video':
        allowed_extensions = ALLOWED_VIDEO_EXTENSIONS
        save_folder = 'videos'
    else:
        return None
    
    if not allowed_file(file.filename, allowed_extensions):
        return None
    
    # åˆ›å»ºå®‰å…¨çš„æ–‡ä»¶å
    filename = secure_filename(file.filename)
    unique_filename = f"{uuid.uuid4().hex}_{filename}"
    
    # ç¡®ä¿ä¸Šä¼ ç›®å½•å­˜åœ¨
    upload_path = os.path.join(
        current_app.config['UPLOAD_FOLDER'], 
        save_folder
    )
    os.makedirs(upload_path, exist_ok=True)
    
    # ä¿å­˜æ–‡ä»¶
    file_path = os.path.join(upload_path, unique_filename)
    file.save(file_path)
    
    # è¿”å›ç›¸å¯¹è·¯å¾„ï¼ˆç”¨äºæ•°æ®åº“å­˜å‚¨ï¼‰
    return f"uploads/{save_folder}/{unique_filename}"
```

### 2. æƒé™æ§åˆ¶è£…é¥°å™¨

åœ¨`app/utils/decorators.py`ä¸­å®ç°æƒé™æ§åˆ¶ï¼š

```python
from functools import wraps
from flask import flash, redirect, url_for, abort
from flask_login import current_user

def admin_required(f):
    """ç®¡ç†å‘˜æƒé™è£…é¥°å™¨"""
    @wraps(f)
    def decorated_function(*args, **kwargs):
        if not current_user.is_authenticated or not current_user.is_admin:
            abort(403)  # æ²¡æœ‰æƒé™
        return f(*args, **kwargs)
    return decorated_function

def teacher_required(f):
    """æ•™å¸ˆæƒé™è£…é¥°å™¨"""
    @wraps(f)
    def decorated_function(*args, **kwargs):
        if not current_user.is_authenticated or \
           (not current_user.is_teacher and not current_user.is_admin):
            abort(403)  # æ²¡æœ‰æƒé™
        return f(*args, **kwargs)
    return decorated_function
```

## ğŸ§© é¡¹ç›®ç‰¹è‰²ä¸åˆ›æ–°ç‚¹

1. **æ•™å­¦è¾…åŠ©å·¥å…·**ï¼šä¸ºä½“è‚²éé—è¯¾ç¨‹æä¾›æ•°å­—åŒ–æ•™å­¦è¾…åŠ©å·¥å…·ï¼Œè¿æ¥è¯¾å ‚å­¦ä¹ ä¸æ•°å­—åˆ†äº«

2. **å†…å®¹åˆ†çº§å±•ç¤º**ï¼šåŸºäºç”¨æˆ·è§’è‰²ï¼ˆå­¦ç”Ÿ/æ•™å¸ˆ/ç®¡ç†å‘˜ï¼‰æä¾›ä¸åŒçš„å†…å®¹ç®¡ç†æƒé™

3. **å¤šåª’ä½“å†…å®¹æ”¯æŒ**ï¼šæ”¯æŒæ–‡ç« ã€å›¾ç‰‡ã€è§†é¢‘ç­‰å¤šç§å½¢å¼çš„å†…å®¹å±•ç¤º

4. **ä½“è‚²éé—æ•°å­—åŒ–**ï¼šä¿ƒè¿›ä½“è‚²ç±»éç‰©è´¨æ–‡åŒ–é—äº§çš„æ•°å­—åŒ–ä¿æŠ¤ä¸ä¼ æ’­

## ğŸ“ˆ é¡¹ç›®å¼€å‘æµç¨‹å›¾

```
åˆå§‹ç¯å¢ƒé…ç½® â†’ æ•°æ®åº“è®¾è®¡ â†’ ç”¨æˆ·è®¤è¯ â†’ å†…å®¹ç®¡ç† â†’ äº’åŠ¨åŠŸèƒ½ â†’ ç•Œé¢ç¾åŒ– â†’ ç³»ç»Ÿæµ‹è¯•
   â†“            â†“           â†“         â†“         â†“          â†“           â†“
 ä»Šå¤©å¼€å§‹      Day 2-3     Day 4-7   Day 8-14   Day 15-18  Day 19-21   Day 22-24
```

## ğŸ”„ å­¦ä¹ æ›²çº¿ä¸çŸ¥è¯†ç‚¹

![å­¦ä¹ æ›²çº¿](https://i.imgur.com/WYHVT2y.png)

## ğŸ“š å­¦ä¹ èµ„æºæ¨è

1. **Flask Webå¼€å‘**
   - Flaskå®˜æ–¹æ–‡æ¡£: https://flask.palletsprojects.com/
   - Flask Mega-Tutorial: https://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-i-hello-world

2. **æ•°æ®åº“ä¸ORM**
   - SQLAlchemyæ–‡æ¡£: https://docs.sqlalchemy.org/
   - Flask-SQLAlchemyæ–‡æ¡£: https://flask-sqlalchemy.palletsprojects.com/

3. **å‰ç«¯å¼€å‘**
   - Bootstrapæ–‡æ¡£: https://getbootstrap.com/docs/5.1/
   - MDN Webæ–‡æ¡£: https://developer.mozilla.org/

## âœ… ä»Šæ—¥ä»»åŠ¡æ¸…å•

1. [  ] åˆ›å»ºé¡¹ç›®ç›®å½•ç»“æ„
2. [  ] å®‰è£…å¿…è¦çš„PythonåŒ…
3. [  ] è®¾ç½®MySQLæ•°æ®åº“
4. [  ] åˆ›å»ºåŸºç¡€é…ç½®æ–‡ä»¶
5. [  ] å®ç°åº”ç”¨åˆå§‹åŒ–ä»£ç 
6. [  ] åˆ›å»ºç”¨æˆ·æ¨¡å‹

## ğŸ“ é¡¹ç›®å¼€å§‹å‰å‡†å¤‡æ¸…å•

1. **å¼€å‘ç¯å¢ƒ**
   - [  ] å®‰è£…Python 3.8+
   - [  ] å®‰è£…MySQLæ•°æ®åº“
   - [  ] å®‰è£…ä»£ç ç¼–è¾‘å™¨(VSCode/PyCharm)

2. **é¡¹ç›®å‡†å¤‡**
   - [  ] åˆ›å»ºé¡¹ç›®GitHubä»“åº“
   - [  ] å‡†å¤‡é¡¹ç›®å¼€å‘æ–‡æ¡£
   - [  ] æ”¶é›†ä½“è‚²éé—ç›¸å…³èµ„æ–™

---

æ­å–œæ‚¨ï¼ç°åœ¨æ‚¨å·²ç»æœ‰äº†ä¸€ä¸ªå…¨é¢çš„é¡¹ç›®ç­–åˆ’æ–¹æ¡ˆã€‚ä»Šå¤©æ˜¯2025å¹´3æœˆ24æ—¥ï¼Œè¯·ç«‹å³å¼€å§‹æŒ‰ç…§è¡ŒåŠ¨è®¡åˆ’è®¾ç½®æ‚¨çš„å¼€å‘ç¯å¢ƒå¹¶å¯åŠ¨é¡¹ç›®ã€‚éšç€é¡¹ç›®çš„æ¨è¿›ï¼Œæˆ‘ä»¬å°†é€æ­¥å®ç°æ›´å¤šåŠŸèƒ½ï¼Œå¹¶æŒç»­ä¼˜åŒ–ç”¨æˆ·ä½“éªŒã€‚ç¥æ‚¨åœ¨"ç¼–ç æœªæ¥ï¼Œæ™ºåˆ›æ— é™"2025ç«èµ›ä¸­å–å¾—ä¼˜å¼‚æˆç»©ï¼